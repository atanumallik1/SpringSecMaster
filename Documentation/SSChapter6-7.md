# Chapter 6 - 7

## Learn about multiple authentication filter


## Backgorund

## Prerequisite 
* MySql DB with table for `user` and `otp` 
![image](images\Chapter6\otp.png)
![image](images\Chapter6\User.png)
 
* Prepolulated User Data in table `user` [ OTP data will be generated by program]
![image](images\Chapter6\ud.png)

## What we do in this demo 
We want to enable the following flow. 
* Application Provides an end point which is _/hello_
* This Endpoint is protected with 2 factor authentication ( manually implemented)
* **Process for Authentication** : User fires GET calls to endpoint `/login`
	* Step 1
		*	The first call to the login endpoint is accompanied by header `username`  and `password`
		*   On entering successful credentials user gets response status 200

		![image](images\Chapter6\L1.png)

	* Step 2
		*	The first call to the login endpoint is accompanied by header `username`  and `otp` [ the value of the OTP is to be read from DB externally* ]
		*    On success user gets the `Authorization` header with authorization value

		![image](images\Chapter6\L2.png)


* **Resource Access** 
	* Access to resource endpoint `/login` must be accompanied by `Authorization` header

		![image](images\Chapter6\L3.png)

 
